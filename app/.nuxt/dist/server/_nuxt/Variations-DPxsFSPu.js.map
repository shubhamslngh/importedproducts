{"version":3,"file":"Variations-DPxsFSPu.js","sources":["../../../../../components/awesome/Variations.vue"],"sourcesContent":["<template>\n  <div v-if=\"products.length > 0\">\n    <swiper\n      :effect=\"'cards'\"\n      :grabCursor=\"true\"\n      :slideShadows=\"false\"\n      :modules=\"modules\"\n      class=\"mySwiper dark:bg-none\"\n    >\n      <!-- {{ console.log(products, \"products for cards in template\") }} -->\n      <swiper-slide\n        class=\"dark:bg-none \"\n        v-for=\"(product, index) in products\"\n        :key=\"index\"\n        :slideShadow=\"false\"\n        :style=\"{ 'background-image': `url(${product.img})` }\"\n      >\n        <div @click=\"handleClick(product.variationId)\">\n          <img\n            :src=\"product.img ? product.img : ''\"\n            alt=\"Product Image\"\n            class=\"transition-all ease-in-out\"\n          />\n        </div>\n      </swiper-slide>\n    </swiper>\n    <div>\n      <AddToCart\n        :productId=\"selectedProductId\"\n        :variationId=\"selectedVariationId\"\n      />\n    </div>\n  </div>\n  <div v-else>Loading products...</div>\n</template>\n\n<script>\nimport { ref, onMounted, defineProps } from \"vue\";\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\nimport { getVariation } from \"../../utils/cart\"; // Assuming getVariation is correctly imported\nimport \"swiper/css/effect-cards\";\nimport \"swiper/css/bundle\";\nimport { EffectCards } from \"swiper/modules\";\nimport AddToCart from \"../awesome/AddtoCart.vue\";\nimport \"swiper/scss/effect-cards\";\n\nexport default {\n  components: {\n    AddToCart,\n    Swiper,\n    SwiperSlide,\n  },\n  props: {\n    productId: {\n      type: Number,\n      required: true,\n    },\n    variationId: {\n      type: Number,\n      default: 0,\n    },\n  },\n  setup(props) {\n    const updateShadowStyles = () => {\n      const shadowElements = document.querySelectorAll(\".swiper-slide-shadow\");\n      shadowElements.forEach((shadowElement) => {\n        shadowElement.style.opacity = \"0\";\n      });\n    };\n\n    const selectedProductId = ref(props.productId);\n    const selectedVariationId = ref(props.variationId);\n    const products = ref([]);\n    let data = ref([]);\n    const { mutate: getProducts, loading } = useMutation(getVariation);\n\n    onMounted(async () => {\n      try {\n        data = await getProducts({ productId: props.productId });\n        if (data) {\n          console.log(data, \"data inside try\");\n          products.value = data.data.variableProduct.variations.nodes.map(\n            (nodes) => ({\n              name: nodes.name,\n              img: nodes.image.link,\n              variationId: nodes.databaseId,\n            })\n          );\n          console.log(products.value, \"products object created\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching product:\", error);\n      }\n    });\n    setTimeout(() => {\n      updateShadowStyles();\n\n      const observer = new MutationObserver(updateShadowStyles);\n\n      const swiperContainer = document.querySelector(\".swiper-container\");\n      if (swiperContainer) {\n        observer.observe(swiperContainer, {\n          attributes: true,\n          childList: true,\n          subtree: true,\n        });\n      }\n    }, 1000);\n\n    const handleClick = (variationId) => {\n      selectedVariationId.value = variationId;\n      selectedProductId.value = props.productId;\n      console.log(selectedProductId.value, \"here is Product id\");\n      console.log(selectedVariationId.value, \"here is Variation id\");\n      // console.log(apollo, \"here is appoloo id\");\n    };\n\n    return {\n      modules: [EffectCards],\n      spaceBetween: 400,\n      selectedProductId,\n      selectedVariationId,\n      products,\n      handleClick,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.img {\n  width: auto;\n  height: auto;\n}\n.mySwiper * {\n  background-color: none;\n}\n.swiper {\n  width: 280px;\n  height: auto;\n}\n\n.swiper-slide {\n  background: none !important;\n  display: flex;\n  opacity: 1;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: bold;\n}\n</style>\n"],"names":["AddToCart","_ssrRenderAttrs","_ssrRenderComponent","_withCtx","_push","_parent","_ssrRenderList","_","_scopeId","_ssrRenderAttr","_createVNode","_openBlock","_createBlock","_Fragment","_renderList"],"mappings":"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"}